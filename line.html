
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TP Measurements Chart</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        .chart {
            display: block;
            margin: auto;
            width: 600px;
            height: 400px;
        }
    </style>
</head>
<body>
    <h2>TP Measurements Over Time</h2>
    <label for="locationSelect">Select Location:</label>
    <select id="locationSelect"></select>
    <svg class="chart"></svg>

    <script>
        // Data for chart
        var data = {"Wetland Pool 1": [{"date": "20210527", "TP": 0.055}, {"date": "20210527", "TP": 0.066}, {"date": "20210730", "TP": 0.113}, {"date": "20210730", "TP": 0.105}, {"date": "20210827", "TP": 0.182}, {"date": "20210827", "TP": 0.449}, {"date": "20211022", "TP": 0.155}, {"date": "20211022", "TP": 0.197}, {"date": "20211022", "TP": 0.185}, {"date": "20211022", "TP": 0.207}, {"date": "20211201", "TP": 0.074}, {"date": "20211201", "TP": 0.075}, {"date": "20211201", "TP": "< MDL"}, {"date": "20220401", "TP": 0.41}, {"date": "20220415", "TP": 0.167}, {"date": "20220615", "TP": 0.215}, {"date": "20220615", "TP": 0.155}, {"date": "20220615", "TP": 0.193}, {"date": "20220615", "TP": 0.281}, {"date": "20220615", "TP": "<MDL"}, {"date": "20220615", "TP": "<MDL"}, {"date": "20220714", "TP": "<MDL"}, {"date": "20220714", "TP": "<MDL"}, {"date": "20220714", "TP": 0.279}, {"date": "20220818", "TP": "<MDL"}, {"date": "20220818", "TP": "<MDL"}, {"date": "20220818", "TP": 0.114}, {"date": "20220920", "TP": 0.009}, {"date": "20220920", "TP": "<MDL"}, {"date": "20220920", "TP": 0.211}, {"date": "20220920", "TP": 0.16}, {"date": "20221101", "TP": 0.791}, {"date": "20221129", "TP": "<MDL"}, {"date": "20221129", "TP": "<MDL"}, {"date": "20221129", "TP": 0.05}, {"date": "20230223", "TP": "<MDL"}, {"date": "20230223", "TP": "<MDL"}, {"date": "20230223", "TP": 0.4}, {"date": "20230418", "TP": 0.15}, {"date": "20230418", "TP": "<MDL"}, {"date": "20230418", "TP": 0.2}, {"date": "20230607", "TP": 0.07}, {"date": "20230607", "TP": 0.03}, {"date": "20230615", "TP": "<MDL"}, {"date": "20230615", "TP": "<MDL"}, {"date": "20230615", "TP": 0.03}], "Wetland Pool 2": [{"date": "20210527", "TP": 0.098}, {"date": "20210527", "TP": 0.099}, {"date": "20210730", "TP": 0.152}, {"date": "20210827", "TP": 0.69}, {"date": "20220401", "TP": 0.056}, {"date": "20220714", "TP": 0.542}], "Wetland Pool 3": [{"date": "20210527", "TP": 0.06}, {"date": "20210527", "TP": 0.057}, {"date": "20220401", "TP": 0.046}], "Wetland Pool 14": [{"date": "20210527", "TP": 0.072}, {"date": "20210730", "TP": 0.08}, {"date": "20220415", "TP": 0.085}, {"date": "20220714", "TP": 0.884}], "Wetland Pool 18": [{"date": "20210527", "TP": 0.108}, {"date": "20210730", "TP": 0.084}, {"date": "20210827", "TP": 0.077}, {"date": "20220401", "TP": 0.093}, {"date": "20220714", "TP": 0.07}, {"date": "20220818", "TP": 0.04}, {"date": "20220920", "TP": 0.077}, {"date": "20221101", "TP": 0.261}, {"date": "20221101", "TP": 0.168}, {"date": "20221129", "TP": 0.08}, {"date": "20221129", "TP": 0.09}, {"date": "20230418", "TP": 0.09}, {"date": "20230615", "TP": 0.06}], "Wetland Pool 22": [{"date": "20210527", "TP": 0.036}, {"date": "20210730", "TP": 0.042}, {"date": "20210927", "TP": 0.232}, {"date": "20220415", "TP": 0.054}, {"date": "20220714", "TP": 0.456}, {"date": "20230614", "TP": 0.25}], "Wetland Pool 25": [{"date": "20210527", "TP": 0.598}, {"date": "20210927", "TP": 0.077}, {"date": "20220415", "TP": 0.067}, {"date": "20220714", "TP": 0.127}, {"date": "20220811", "TP": 0.264}, {"date": "20220921", "TP": 0.08}, {"date": "20230418", "TP": 0.06}], "Aurand Run connection to P1": [{"date": "20210730", "TP": 0.011}, {"date": "20210827", "TP": 0.018}, {"date": "20220401", "TP": "<MDL"}, {"date": "20220415", "TP": 0.093}, {"date": "20220714", "TP": 0.015}, {"date": "20220818", "TP": "<MDL"}, {"date": "20220920", "TP": "<MDL"}, {"date": "20221101", "TP": "<MDL"}, {"date": "20221129", "TP": "<MDL"}, {"date": "20230223", "TP": 0.45}, {"date": "20230615", "TP": "<MDL"}], "Aurand Run downstream": [{"date": "20210730", "TP": 0.022}, {"date": "20210827", "TP": 0.022}, {"date": "20220401", "TP": "<MDL"}, {"date": "20220415", "TP": 0.122}, {"date": "20220714", "TP": 0.016}, {"date": "20220818", "TP": "<MDL"}, {"date": "20220920", "TP": "<MDL"}, {"date": "20221101", "TP": "<MDL"}, {"date": "20221129", "TP": "<MDL"}, {"date": "20230418", "TP": "<MDL"}, {"date": "20230615", "TP": "<MDL"}], "Wetland Pool 20": [{"date": "20210730", "TP": 0.054}, {"date": "20210927", "TP": 1.049}, {"date": "20220415", "TP": 0.329}, {"date": "20220727", "TP": "<MDL"}, {"date": "20220727", "TP": "<MDL"}, {"date": "20220921", "TP": "<MDL"}, {"date": "20220921", "TP": "<MDL"}, {"date": "20221102", "TP": "<MDL"}, {"date": "20221102", "TP": "<MDL"}, {"date": "20221117", "TP": "<MDL"}, {"date": "20221201", "TP": "<MDL"}, {"date": "20221201", "TP": "<MDL"}, {"date": "20230607", "TP": "<MDL"}, {"date": "20230607", "TP": "<MDL"}, {"date": "20230614", "TP": "<MDL"}, {"date": "20230614", "TP": "<MDL"}], "Wetland Pool 37": [{"date": "20210730", "TP": 0.074}, {"date": "20210927", "TP": 0.053}, {"date": "20220415", "TP": 0.036}, {"date": "20220714", "TP": 0.273}, {"date": "20230418", "TP": 0.02}], "Wetland Pool 38": [{"date": "20210730", "TP": 0.047}, {"date": "20210927", "TP": 0.133}, {"date": "20220415", "TP": 0.036}, {"date": "20220714", "TP": 0.252}, {"date": "20220811", "TP": 0.275}, {"date": "20230614", "TP": 0.26}], "Wetland Pool 40": [{"date": "20210730", "TP": 0.044}, {"date": "20210927", "TP": 0.041}, {"date": "20211022", "TP": 0.055}, {"date": "20211022", "TP": 0.045}, {"date": "20211022", "TP": 0.038}, {"date": "20211022", "TP": 0.043}, {"date": "20211201", "TP": 0.05}, {"date": "20211201", "TP": 0.047}, {"date": "20220415", "TP": 0.093}, {"date": "20220615", "TP": 0.043}, {"date": "20220615", "TP": 0.047}, {"date": "20220714", "TP": 0.083}, {"date": "20220727", "TP": 0.024}, {"date": "20220727", "TP": 0.032}, {"date": "20220811", "TP": 0.02}, {"date": "20220921", "TP": 0.056}, {"date": "20221102", "TP": 0.178}, {"date": "20221102", "TP": 0.478}, {"date": "20221117", "TP": 0.117}, {"date": "20221117", "TP": 0.094}, {"date": "20221117", "TP": 0.1}, {"date": "20221201", "TP": 0.2}, {"date": "20221201", "TP": 0.08}, {"date": "20230418", "TP": 0.14}, {"date": "20230607", "TP": 0.07}, {"date": "20230607", "TP": 0.08}, {"date": "20230607", "TP": 0.08}], "Aurand Run upstream": [{"date": "20210827", "TP": "<MDL"}, {"date": "20220415", "TP": 0.104}, {"date": "20220714", "TP": 0.012}, {"date": "20220818", "TP": "<MDL"}, {"date": "20220920", "TP": "<MDL"}, {"date": "20221101", "TP": "<MDL"}, {"date": "20221129", "TP": "<MDL"}, {"date": "20230418", "TP": 0.02}, {"date": "20230615", "TP": 0.02}], "Wetland Pool 4": [{"date": "20210827", "TP": 0.142}, {"date": "20220401", "TP": 0.068}, {"date": "20220714", "TP": 0.445}, {"date": "20220818", "TP": 0.054}, {"date": "20220920", "TP": 0.131}, {"date": "20221101", "TP": 0.129}, {"date": "20221101", "TP": 0.109}, {"date": "20221129", "TP": 0.1}, {"date": "20221129", "TP": 0.15}, {"date": "20230418", "TP": 0.19}, {"date": "20230615", "TP": 0.15}], "Wetland Pool 5": [{"date": "20210827", "TP": 0.268}, {"date": "20220415", "TP": 0.065}, {"date": "20220714", "TP": 0.626}], "Wetland Pool 7": [{"date": "20210827", "TP": 0.154}, {"date": "20220401", "TP": 0.028}], "Wetland Pool 8": [{"date": "20210827", "TP": 0.15}, {"date": "20220401", "TP": 0.071}, {"date": "20220714", "TP": 0.187}, {"date": "20220818", "TP": 0.333}, {"date": "20230418", "TP": 0.06}, {"date": "20230615", "TP": 1.16}], "Wetland Pool 9": [{"date": "20210827", "TP": 0.444}, {"date": "20220401", "TP": 0.179}, {"date": "20220714", "TP": 0.42}, {"date": "20220818", "TP": 0.108}, {"date": "20220920", "TP": 0.176}, {"date": "20221101", "TP": 0.136}, {"date": "20221101", "TP": 0.267}, {"date": "20221129", "TP": 0.17}, {"date": "20221129", "TP": 0.21}, {"date": "20230418", "TP": 0.19}], "Wetland Pool 11": [{"date": "20210827", "TP": 0.128}, {"date": "20220401", "TP": 0.088}, {"date": "20230418", "TP": 0.14}], "Wetland Pool 12": [{"date": "20210827", "TP": 0.159}, {"date": "20220401", "TP": 0.065}, {"date": "20220401", "TP": 0.052}, {"date": "20220415", "TP": 0.09}, {"date": "20220714", "TP": 0.437}, {"date": "20220818", "TP": 0.507}, {"date": "20220920", "TP": 1.503}, {"date": "20230418", "TP": 0.05}, {"date": "20230615", "TP": 0.43}], "Wetland Pool 15": [{"date": "20210827", "TP": 0.157}, {"date": "20220415", "TP": 0.034}, {"date": "20220714", "TP": 0.286}], "Wetland Pool 16": [{"date": "20210827", "TP": 0.157}, {"date": "20220415", "TP": 0.043}], "Wetland Pool 19": [{"date": "20210827", "TP": 0.078}, {"date": "20220415", "TP": 0.074}, {"date": "20220714", "TP": 0.083}, {"date": "20220818", "TP": 0.029}, {"date": "20220920", "TP": 0.183}, {"date": "20221101", "TP": 0.642}, {"date": "20221129", "TP": 0.38}, {"date": "20230418", "TP": 0.02}, {"date": "20230615", "TP": 0.1}], "Wetland Pool 21": [{"date": "20210927", "TP": 0.216}, {"date": "20220415", "TP": 0.055}, {"date": "20220714", "TP": 0.089}, {"date": "20220811", "TP": 0.071}, {"date": "20220921", "TP": 0.126}], "Wetland Pool 24": [{"date": "20210927", "TP": 0.292}, {"date": "20220714", "TP": 0.162}], "Wetland Pool 26": [{"date": "20210927", "TP": 0.051}, {"date": "20220714", "TP": 0.221}, {"date": "20220811", "TP": 0.072}, {"date": "20220921", "TP": 0.037}, {"date": "20221102", "TP": 0.166}, {"date": "20221102", "TP": 0.13}, {"date": "20221201", "TP": 0.13}, {"date": "20221201", "TP": 0.11}, {"date": "20230418", "TP": 0.06}], "Wetland Pool 27": [{"date": "20210927", "TP": 0.12}, {"date": "20220714", "TP": 0.26}, {"date": "20220811", "TP": 0.326}], "Wetland Pool 28": [{"date": "20210927", "TP": 0.412}, {"date": "20220714", "TP": 0.199}, {"date": "20220811", "TP": 0.486}], "Wetland Pool 29": [{"date": "20210927", "TP": 0.209}, {"date": "20220714", "TP": 0.246}, {"date": "20220811", "TP": 0.248}, {"date": "20220921", "TP": 1.555}, {"date": "20221102", "TP": 1.235}, {"date": "20221201", "TP": 0.55}], "Wetland Pool 30": [{"date": "20210927", "TP": 0.116}, {"date": "20220415", "TP": 0.078}, {"date": "20220714", "TP": 0.116}, {"date": "20220811", "TP": 0.034}, {"date": "20220921", "TP": 0.03}, {"date": "20221102", "TP": 0.851}, {"date": "20221102", "TP": 0.141}, {"date": "20221201", "TP": 0.09}, {"date": "20230223", "TP": 0.4}, {"date": "20230418", "TP": 0.06}, {"date": "20230614", "TP": 0.03}], "Wetland Pool 31": [{"date": "20210927", "TP": 0.141}, {"date": "20220714", "TP": 0.485}, {"date": "20220811", "TP": 0.464}, {"date": "20230223", "TP": 0.21}, {"date": "20230223", "TP": 0.2}, {"date": "20230418", "TP": 0.03}, {"date": "20230614", "TP": 0.18}], "Wetland Pool 33": [{"date": "20210927", "TP": 0.165}, {"date": "20220714", "TP": 0.404}, {"date": "20220811", "TP": 0.214}, {"date": "20220921", "TP": 0.831}, {"date": "20230614", "TP": 0.1}], "Wetland Pool 34": [{"date": "20210927", "TP": 0.028}, {"date": "20220714", "TP": 0.091}, {"date": "20220811", "TP": 0.117}, {"date": "20220921", "TP": 0.123}, {"date": "20221102", "TP": 0.1}, {"date": "20221201", "TP": 0.16}, {"date": "20221201", "TP": 0.21}, {"date": "20230418", "TP": 0.11}, {"date": "20230614", "TP": 0.17}], "Wetland Pool 35": [{"date": "20210927", "TP": 0.129}, {"date": "20220415", "TP": 0.084}, {"date": "20220714", "TP": 0.139}, {"date": "20220811", "TP": 0.177}, {"date": "20220921", "TP": 0.054}, {"date": "20221102", "TP": 0.152}, {"date": "20221201", "TP": 0.28}, {"date": "20230614", "TP": 0.12}], "Wetland Pool 36": [{"date": "20210927", "TP": 0.152}, {"date": "20220415", "TP": 0.194}, {"date": "20230223", "TP": 0.29}, {"date": "20230418", "TP": 0.02}, {"date": "20230614", "TP": 0.36}], "Wetland Pool 39": [{"date": "20210927", "TP": 0.074}, {"date": "20220415", "TP": 0.025}, {"date": "20220714", "TP": 0.075}, {"date": "20220811", "TP": 0.143}, {"date": "20220921", "TP": 0.067}, {"date": "20221102", "TP": 0.124}, {"date": "20221201", "TP": 0.32}, {"date": "20230418", "TP": 0.03}], "Wetland Pool 41": [{"date": "20210927", "TP": 0.185}, {"date": "20220714", "TP": 0.955}, {"date": "20220811", "TP": 0.135}, {"date": "20220921", "TP": 1}], "Wetland Pool 42": [{"date": "20210927", "TP": 0.051}, {"date": "20220415", "TP": 0.071}, {"date": "20220714", "TP": 1.655}, {"date": "20220811", "TP": 0.198}, {"date": "20220921", "TP": 0.134}, {"date": "20221102", "TP": 0.343}, {"date": "20221201", "TP": 0.51}, {"date": "20230223", "TP": 0.38}, {"date": "20230223", "TP": 0.32}, {"date": "20230418", "TP": 0.05}, {"date": "20230614", "TP": 0.19}], "Wetland Pool 43": [{"date": "20210927", "TP": 0.034}, {"date": "20220714", "TP": 0.165}, {"date": "20220811", "TP": 0.439}, {"date": "20220921", "TP": 0.062}, {"date": "20230418", "TP": 0.04}, {"date": "20230614", "TP": 0.05}], "Wetland Pool 6": [{"date": "20220401", "TP": 0.091}, {"date": "20220714", "TP": 0.163}, {"date": "20220818", "TP": 0.317}, {"date": "20230418", "TP": 0.1}, {"date": "20230615", "TP": 0.91}], "Wetland Pool 13": [{"date": "20220401", "TP": 0.065}, {"date": "20220415", "TP": 0.044}, {"date": "20220714", "TP": 0.102}, {"date": "20220818", "TP": 0.13}, {"date": "20230615", "TP": 0.39}], "Wetland Pool 10": [{"date": "20220415", "TP": 0.045}, {"date": "20230418", "TP": 0.46}], "Wetland Pool 17": [{"date": "20220415", "TP": 0.073}], "Wetland Pool 32": [{"date": "20230418", "TP": 0.03}, {"date": "20230614", "TP": 0.08}]};

        // Set the dimensions and margins of the graph
        var margin = {top: 10, right: 30, bottom: 30, left: 60},
            width = 700 - margin.left - margin.right,
            height = 400 - margin.top - margin.bottom;

        // Append the svg object to the body of the page
        var svg = d3.select(".chart")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform",
                  "translate(" + margin.left + "," + margin.top + ")");

        // Add X axis
        var x = d3.scaleTime()
          .range([ 0, width ]);
        var xAxis = svg.append("g")
          .attr("transform", "translate(0," + height + ")")

        // Add Y axis
        var y = d3.scaleLinear()
          .range([ height, 0]);
        var yAxis = svg.append("g")
          .attr("class", "myYaxis")

        // Add the line
        var line = svg.append("path")
          .attr("fill", "none")
          .attr("stroke", "steelblue")
          .attr("stroke-width", 1.5)

        // Dropdown change event
        function update(selectedLocation) {
            // Create a update selection: bind to the new data
            var update = line
              .datum(data[selectedLocation])

            // Update the X axis
            x.domain(d3.extent(data[selectedLocation], function(d) { return d3.timeParse("%Y%m%d")(d.date); }))
            xAxis.call(d3.axisBottom(x));

            // Update the Y axis
            y.domain([0, d3.max(data[selectedLocation], function(d) { return +d.TP; })]);
            yAxis.transition().duration(1000).call(d3.axisLeft(y));

            // Update the line
            update
              .transition()
              .duration(1000)
              .attr("d", d3.line()
                .x(function(d) { return x(d3.timeParse("%Y%m%d")(d.date)); })
                .y(function(d) { return y(+d.TP); })
              )
        }

        // Fill the dropdown
        d3.select("#locationSelect")
          .selectAll('myOptions')
            .data(Object.keys(data))
          .enter()
            .append('option')
          .text(function (d) { return d; }) // text showed in the menu
          .attr("value", function (d) { return d; }) // corresponding value returned by the button

        // Initialize the plot with the first dataset
        update(Object.keys(data)[0])

        // When the button is changed, run the updateChart function
        d3.select("#locationSelect").on("change", function(event,d) {
            // Recover the option that has been chosen
            var selectedOption = d3.select(this).property("value")
            // Run the updateChart function with this selected option
            update(selectedOption)
        })
    </script>
</body>
</html>
